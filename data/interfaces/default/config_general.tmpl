#import os.path
#import sickbeard
#from sickbeard.common import *
#from sickbeard import config
#set global $title  = "Config - General"
#set global $header = "General Configuration"

#set global $sbPath="../.."

<!--#set global $topmenu="config"#-->
#include $os.path.join($sickbeard.PROG_DIR, "data/interfaces/default/inc_top.tmpl")

<script type="text/javascript">
nameTestURL = "$sbRoot/config/general/testNaming";
</script>
<script type="text/javascript" src="$sbRoot/js/configGeneral.js"></script>
#set $anyQualities, $bestQualities = $Quality.splitQuality($sickbeard.QUALITY_DEFAULT)
<script>
\$(document).ready(function(){

  if (#if $sickbeard.QUALITY_DEFAULT in $qualityPresets then "1" else "0"#) {
      \$('#customQuality').hide();
  }

  \$.fn.setFromPresets = function(preset) {
      if (preset == 0) {
        \$('#customQuality').show();
        return
      } else
        \$('#customQuality').hide();
  
      \$('#anyQualities option').each(function(i) {
          var result = preset & \$(this).val()
          if (result > 0) \$(this).attr('selected', 'selected');
          else \$(this).attr('selected', false);
      });

      \$('#bestQualities option').each(function(i) {
          var result = preset & (\$(this).val() << 16)
          if (result > 0) \$(this).attr('selected', 'selected');
          else \$(this).attr('selected', false);
      });

      return
  }
  
  \$('#qualityPreset').change(function(){
        \$(this).setFromPresets(\$('#qualityPreset :selected').val());
  });

});
</script>

<form action="saveGeneral" method="POST">

All non-absolute folder locations are relative to $sickbeard.PROG_DIR<br /><br />

<div class="EntryBlock"><p><strong>
    <em>NOTE:</em> Manual restart needed for web server changes!<br />
</strong></p>
<fieldset class="EntryFieldSet">

<legend>Misc</legend>
<strong>Logging directory:</strong><br />
Directory where Sick Beard should place its logs<br />
<input type="text" name="log_dir" id="log_dir" value="$sickbeard.LOG_DIR" size="30"><br />
<br />

<input type="checkbox" name="create_metadata" #if $sickbeard.CREATE_METADATA then "CHECKED" else ""#> <strong>Create metadata</strong><br />
If checked Sick Beard will create nfo files<br />
for all your media<br />
<br />

<input type="checkbox" name="create_images" #if $sickbeard.CREATE_IMAGES then "CHECKED" else ""#> <strong>Create images</strong><br />
If checked Sick Beard will create tbn/fanart/posters<br />
for all your media<br />
<br />

<input type="checkbox" name="launch_browser" #if $sickbeard.LAUNCH_BROWSER then "CHECKED" else ""#> <strong>Launch browser on startup</strong><br />
Should Sick Beard open its home page in your<br />browser when you start it?<br />
<br />

<input type="checkbox" name="version_notify" #if $sickbeard.VERSION_NOTIFY then "CHECKED" else ""#> <strong>Notify when new versions are available</strong><br />
Doesn't work if you're running from source
<br />

</fieldset>
</div>

<div class="EntryBlock">
<fieldset class="EntryFieldSet">

<legend>Web Interface (requires restart)</legend>

<strong>HTTP port</strong><br />
Web port Sick Beard should listen on<br />
<input type="text" name="web_port" value="$sickbeard.WEB_PORT" size="10"><br />
<br />

<input type="checkbox" name="web_log" #if $sickbeard.WEB_LOG then "CHECKED" else ""#> <strong>Enable HTTP log</strong><br />
Whether you want cherrypy logs to be generated<br />
<br />

<strong>Sick Beard username</strong><br />
Web authentication username<br />
<input type="text" name="web_username" value="$sickbeard.WEB_USERNAME" size="10"><br />
<br />

<strong>Sick Beard password</strong><br />
Web authentication password<br />
<input type="password" name="web_password" value="$sickbeard.WEB_PASSWORD" size="10"><br />
<br />

</div>
</fieldset>

<div class="EntryBlock">
<fieldset class="EntryFieldSet">

<legend>Defaults</legend>

<strong>Initial Quality</strong><br />
Quality to assign to a newly created show<br />
#set $selected = None
<select id="qualityPreset">
<option value="0">Custom
#for $curPreset in sorted($qualityPresets):
<option value="$curPreset" #if $curPreset == $sickbeard.QUALITY_DEFAULT then "SELECTED" else ""#>$qualityPresetStrings[$curPreset]
#end for
</select><br />
<br />
<div id="customQuality">
Initially download one of the following:<br />
<select id="anyQualities" name="anyQualities" multiple="multiple" size="len($Quality.qualityStrings)">
#for $curQuality in sorted($Quality.qualityStrings):
<option value="$curQuality" #if $curQuality in $anyQualities then "SELECTED" else ""#>$Quality.qualityStrings[$curQuality]
#end for
</select><br />
<br />
Re-download any/all of these qualities if available:<br />
<select id="bestQualities" name="bestQualities" multiple="multiple" size="len($Quality.qualityStrings)">
#for $curQuality in sorted($Quality.qualityStrings):
<option value="$curQuality" #if $curQuality in $bestQualities then "SELECTED" else ""#>$Quality.qualityStrings[$curQuality]
#end for
</select><br />
<br />
</div>

<input type="checkbox" name="season_folders_default" #if $sickbeard.SEASON_FOLDERS_DEFAULT then "CHECKED" else ""#> <strong>Use Season Folders</strong><br />
Whether shows should use season folders by default<br />
<br />

</fieldset>
</div>

#set $naming_ep_type_text = ("1x02", "s01e02", "S01E02")
#set $naming_multi_ep_type_text = ("extend", "duplicate", "repeat")

<div class="EntryBlock">
<fieldset class="EntryFieldSet">

<legend>Episode Naming</legend>

<input type="checkbox" name="naming_show_name" id="naming_show_name" #if $sickbeard.NAMING_SHOW_NAME then "CHECKED" else ""#> <strong>Include show name</strong><br />
<br />
<input type="checkbox" name="naming_ep_name" id="naming_ep_name" #if $sickbeard.NAMING_EP_NAME then "CHECKED" else ""#> <strong>Include episode name</strong><br />
<br />
<input type="checkbox" name="naming_use_periods" id="naming_use_periods" #if $sickbeard.NAMING_USE_PERIODS then "CHECKED" else ""#> <strong>Use periods</strong><br />
If checked all spaces will be replaced with periods<br />
<br />

<input type="checkbox" name="naming_quality" id="naming_quality" #if $sickbeard.NAMING_QUALITY then "CHECKED" else ""#> <strong>Include quality</strong><br />
If checked the episode quality will be appended to the end of the file name<br />
<br />

<strong>Separator Style</strong><br />
<select name="naming_sep_type" id="naming_sep_type">
#for ($i, $ex) in enumerate($config.naming_sep_type_text):
<option value="$i" #if $i == int($sickbeard.NAMING_SEP_TYPE) then "SELECTED" else ""#>$ex
#end for
</select><br />
<br />

<strong>Number Style</strong><br />
Style of season/episode numbers<br />
<select name="naming_ep_type" id="naming_ep_type">
#for ($i, $ex) in enumerate($config.naming_ep_type_text):
<option value="$i" #if $i == int($sickbeard.NAMING_EP_TYPE) then "SELECTED" else ""#>$ex
#end for
</select><br />
<br />

<strong>Example:</strong> <div id="normalExampleText"></div><br />

<strong>Multi-episode Style</strong><br />
Style of season/episode numbers for multi-episodes<br />
<select name="naming_multi_ep_type" id="naming_multi_ep_type">
#for ($i, $ex) in enumerate($config.naming_multi_ep_type_text):
<option value="$i" #if $i == int($sickbeard.NAMING_MULTI_EP_TYPE) then "SELECTED" else ""#>$ex
#end for
</select><br />
<br />

<strong>Example:</strong> <div id="multiExampleText"></div><br />
<br />

</fieldset>
</div>


<p>
<input type="submit" value="Save Changes">
</p>
</form>

<script type="text/javascript" charset="utf-8">
    jQuery('#log_dir').fileBrowser({ title: 'Select Log Directory' });
</script>

#include $os.path.join($sickbeard.PROG_DIR, "data/interfaces/default/inc_bottom.tmpl")